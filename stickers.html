<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collect stickers</title>
    <link rel="stylesheet" href="./styles/normalize.css" />
    <!-- Google Web Font, Hanken Grotesk -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet">

    <!-- Pretendard Font -->
    <link rel="stylesheet" as="style" crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./styles/main.css" />

    <style>
      .sticker-icon {
        filter: invert(36%) sepia(9%) saturate(2896%) hue-rotate(233deg) brightness(94%) contrast(86%);
        animation: rotate 2s linear infinite;
      }

      .sticker--content {
        display: flex;
        flex-direction: row;
        justify-content: center;
        align-items: center;
        flex: 1;
        width: 100%;
        height: 100%;
      }

      .stickers {
        width: 50%;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 1rem;
      }

      .sticker {
        width: 5rem;
        height: auto;
      }

      .sticker--bg {
        width: 50%;
        height: 100%;
        background: url('./assets/images/sticker-bg.png');
        background-repeat: no-repeat;
        background-size: cover;
      }
    </style>
  </head>

  <body data-page="stickers">
    <main>
      <div class="content">
        <div class="content--header">
          <a href="/" class="nav--back">
            <i class="bi bi-arrow-left"></i>
          </a>
          <img src="./assets/images/clover.svg" class="hobby--icon sticker-icon" alt="클로버 아이콘">
        </div>
        <div class="sticker--content">
          <div class="stickers">
            <img src="./assets/images/sticker-1.png" class="sticker" alt="">
            <img src="./assets/images/sticker-2.png" class="sticker" alt="">
            <img src="./assets/images/sticker-3.png" class="sticker" alt="">
            <img src="./assets/images/sticker-4.png" class="sticker" alt="">
          </div>
          <div class="sticker--bg">

          </div>
        </div>
    </main>

    <script>
      // 스티커 컨테이너와 개별 스티커 요소 선택
      const stickersContainer = document.querySelector('.stickers');
      const stickerBg = document.querySelector('.sticker--bg');
      const stickers = document.querySelectorAll('.sticker');

      // 스티커 컨테이너의 스타일 수정
      stickersContainer.style.position = 'relative';

      // 각 스티커에 대한 이벤트 설정
      stickers.forEach((sticker, index) => {
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;


        function dragStart(e) {
          if (e.type === "touchstart") {
            initialX = e.touches[0].clientX - xOffset;
            initialY = e.touches[0].clientY - yOffset;
          } else {
            initialX = e.clientX - xOffset;
            initialY = e.clientY - yOffset;
          }

          if (e.target === sticker) {
            isDragging = true;
            sticker.style.cursor = 'grabbing';
            sticker.style.zIndex = '1000';
          }
        }

        function dragEnd() {
          initialX = currentX;
          initialY = currentY;
          isDragging = false;
          sticker.style.cursor = 'grab';
          sticker.style.zIndex = '1';
        }

        function drag(e) {
          if (isDragging) {
            e.preventDefault();

            if (e.type === "touchmove") {
              currentX = e.touches[0].clientX - initialX;
              currentY = e.touches[0].clientY - initialY;
            } else {
              currentX = e.clientX - initialX;
              currentY = e.clientY - initialY;
            }

            xOffset = currentX;
            yOffset = currentY;

            setTranslate(currentX, currentY, sticker);
          }
        }

        function setTranslate(xPos, yPos, el) {
          el.style.transform = `translate(${xPos}px, ${yPos}px)`;
        }

        // 마우스 이벤트
        sticker.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        // 터치 이벤트
        sticker.addEventListener('touchstart', dragStart);
        document.addEventListener('touchmove', drag, { passive: false });
        document.addEventListener('touchend', dragEnd);
      });
    </script>
    <script src="./assets/scripts/main.js"></script>
  </body>

</html>